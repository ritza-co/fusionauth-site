---
title: "Passwordless Authentication: A Comprehensive Guide"
description: Learn about passkeys and other passwordless authentication.
author: Richard Cooke
section: Authentication
tags: passwordless login, password-free authentication, secure authentication
methods, passkeys, magic links
icon: /img/icons/passwordless-authentication-image.svg
darkIcon: /img/icons/passwordless-authentication-image-dark.svg
---

import Aside from 'src/components/Aside.astro';
import Breadcrumb from 'src/components/Breadcrumb.astro';
import Breadcrumb from 'src/components/InlineUIElement.astro';
import Breadcrumb from 'src/components/InlineField.astro';
import StepUpDiagram from 'src/diagrams/docs/lifecycle/authenticate-users/step-up-auth.astro';

- [What is Passwordless Authentication?](#what-is-passwordless-authentication)
- [Other Articles](#other-articles)
- [Why is Passwordless Authentication Important?](#why-is-passwordless-authentication-important)
- [Key Methods Of Passwordless Authentication](#key-methods-of-passwordless-authentication)
  - [Magic Links](#magic-links)
  - [One-Time Password (OTP)​](#one-time-password-otp)
  - [TOTP ?](#totp-)
  - [Biometric Authentication​](#biometric-authentication)
  - [Passkeys (FIDO2/WebAuthn)​](#passkeys-fido2webauthn)
  - [Clean Up](#clean-up)
- [Benefits of Passwordless Authentication](#benefits-of-passwordless-authentication)
- [Challenges Solved by Passwordless Authentication](#challenges-solved-by-passwordless-authentication)
- [Problems With Passkeys](#problems-with-passkeys)
- [Passwordless Authentication Use Cases](#passwordless-authentication-use-cases)
- [Types of Passwordless Authentication Solutions](#types-of-passwordless-authentication-solutions)
  - [BY DEPLOYMENT MODEL](#by-deployment-model)
  - [BY FOCUS AREA](#by-focus-area)
- [Nine Key Features to Look for in a Passwordless Authentication Solution](#nine-key-features-to-look-for-in-a-passwordless-authentication-solution)
- [Developer's Checklist for Evaluating Passwordless Solutions](#developers-checklist-for-evaluating-passwordless-solutions)
- [Ready to Go Passwordless?](#ready-to-go-passwordless)
- [Passwordless Options Offered By FusionAuth](#passwordless-options-offered-by-fusionauth)
  - [Magic Link](#magic-link)
  - [One-Time Password (OTP)​](#one-time-password-otp-1)
  - [Time-Based One-Time Password (TOTP)​](#time-based-one-time-password-totp)
  - [Passkeys (FIDO2/WebAuthn)​](#passkeys-fido2webauthn-1)
  - [Using The FA API](#using-the-fa-api)
    - [Re-Authentication With An OTP](#re-authentication-with-an-otp)
    - [Re-Authentication With A Passkey](#re-authentication-with-a-passkey)
- [TODO](#todo)


## What is Passwordless Authentication?
Passwordless authentication is a modern approach to user authentication that eliminates the need for traditional passwords. Instead, it relies on alternative methods such as biometrics, magic links, one-time passwords (OTPs), or passkeys. This approach enhances security by mitigating risks associated with password theft and improves user experience by removing the
friction of remembering complex passwords.


- explain synching
- add explanation of asymmetric keys:

Passkeys use asymmetric keys instead of passwords for several key reasons, which enhance security and convenience:

    Enhanced Security: Asymmetric cryptography involves two keys: a public key that can be shared and a private key that remains confidential. This setup provides several layers of protection:
        Protection against Brute Force Attacks: Since the private key remains hidden and cannot be directly guessed, passkeys are exceedingly difficult to crack through brute force methods[1][2].
        Mitigation of Common Password Vulnerabilities: Passkeys eliminate risks such as easily guessable phrases, reused passwords, and vulnerabilities to dictionary attacks[2][3].
        Non-Repudiation: Asymmetric keys allow for non-repudiation, meaning users cannot deny involvement in a transaction, reducing identity theft and fraud risks[1].

    Secure Storage: The private key is securely stored in a trusted authenticator, eliminating vulnerabilities associated with inadequate storage practices on the client side. This means no more passwords stored in insecure locations like post-it notes or mobile phone contact lists[3].

    Unique Keys: Different passkeys are automatically created for different websites, eliminating the risk of password reuse, reducing susceptibility to credential stuffing, and mitigating the impact of compromised credentials[3].

    No Secrets Sent Over the Internet: Passkeys rely on sending a signed challenge—not the actual private key—to the website during login, ensuring that the private key stays safely on the user’s device without risk of interception[3].

    Improved Database Security: With passkeys, there is no need to store passwords in databases, reducing the risk of password leaks and breaches[3].

    Resistance to Phishing: Passkeys are resistant to phishing attacks because they cannot be typed out or written down and are only valid when used on specific, user-owned devices[4].

In summary, passkeys use asymmetric keys instead of passwords to offer enhanced security, privacy, and convenience, making them a more robust and practical solution for safeguarding digital identities.


## Other Articles

- https://fusionauth.io/articles/authentication/passwordless-authentication-security
- https://fusionauth.io/articles/authentication/webauthn
- https://fusionauth.io/articles/authentication/how-passwordless-works
- https://fusionauth.io/articles/authentication/passwordless-sso
- https://fusionauth.io/articles/authentication/webauthn-explained
- https://fusionauth.io/articles/authentication/why-passwordless-authentication-matters

## Why is Passwordless Authentication Important?

Password-based systems are vulnerable to attacks like phishing, credential stuffing, and brute force. Passwordless authentication addresses these challenges by:

1. Enhancing Security: Eliminates weak or reused passwords as an attack vector.
1. Improving User Experience: Reduces login friction and forgotten password issues.
1. Streamlining Onboarding: Simplifies the registration process for new users.
1. Reducing Operational Costs: Decreases password reset requests and support tickets.

Test at https://webauthn.io

## Key Methods Of Passwordless Authentication

### Magic Links
Users receive an email containing a link that logs them in when clicked.
    - Example: A user clicks a link sent to their email to access their account.

### One-Time Password (OTP)​

An OTP is a one-time password or one-time PIN (where PIN is a personal identification number).

Temporary codes sent via SMS or email for single-use login.
    - Example: A user enters a 6-digit code sent to their phone to log in.

### TOTP ?

### Biometric Authentication​
Uses physical traits like fingerprints or facial recognition for login.-​
    - Example: A banking app authenticates users via Face ID.

### Passkeys (FIDO2/WebAuthn)​
Cryptographic keys stored on devices replace passwords entirely.
    - Example: Logging in with a fingerprint scanner on a smartphone.


### Clean Up
Docker stuff todo

## Benefits of Passwordless Authentication

https://developer.mozilla.org/en-US/docs/Web/API/Web_Authentication_API#webauthn_concepts_and_usage

1. Stronger Security
    - Reduces the risk of phishing and credential theft.
    - Leverages multi-factor authentication (MFA) principles without requiring
passwords.
2. Improved User Experience
    - Faster logins with fewer steps.
    - No need to remember or reset passwords.
3. Scalability and Flexibility
    - Adapts to various platforms and devices.
    - Supports diverse use cases across B2C, B2B, and internal applications.
4. Compliance Made Easier
    - Helps meet data protection regulations like GDPR by minimizing sensitive data storage.

## Challenges Solved by Passwordless Authentication

1. Credential Theft Mitigation: Protects against phishing, brute force attacks, and credential stuffing.
2. Onboarding Simplification: Removes barriers for new users with seamless registration flows.
3. Improved Accessibility: Enables secure login options for users with disabilities who may struggle with traditional keyboards or password entry.
4. Cost Reduction: Lowers IT support costs related to password management.

## Problems With Passkeys
- https://caniuse.com/webauthn. Firefox does not support direct attestations (to avoid fingerprinting browsers and maintain users' privacy) and TouchID (Apple device fingerprint scan).
- passkeys dont' work in linux. security conscious. programmers and IT professionals. so don't force only passkeys. bitwarden extension or yubikey. same with privacy-orientated phones. high crime countries. cross-browser and device problems
- more complicated - https://developer.mozilla.org/en-US/docs/Web/API/Web_Authentication_API, https://jsr.io/@simplewebauthn/browser/doc
- what happens when user loses devices and backup keys
- original passkeys never left dongle or secure chip. modern ones are not as safe, have to be exported to be saved on the cloud. find reference. The security model has shifted from "absolute hardware isolation" to "hardware-protected encryption of transportable keys" - trading some theoretical security for practical usability.
- browser quirks: https://simplewebauthn.dev/docs/advanced/browser-quirks
- https://passkeys.dev/device-support/

## Passwordless Authentication Use Cases

1. Consumer Applications (B2C)
    - E-commerce platforms use magic links for quick logins during checkout.
2. Enterprise Applications (B2B)
    - Employees access corporate tools using biometric authentication or passkeys.
3. Highly Regulated Industries
    - Financial services implement passwordless systems to meet strict security requirements while improving customer satisfaction.
4. IoT Devices
    - Smart home devices use passkeys or mobile-based authentication for secure access without screens or keyboards.

## Types of Passwordless Authentication Solutions

### BY DEPLOYMENT MODEL

- Cloud-Based Solutions Fully managed services hosted in the cloud for quick deployment and scalability.
  - Examples: Auth0, Firebase Authentication
- On-Premises Solutions Self-hosted solutions offering complete control over data and infrastructure.
  - Examples: FusionAuth, Keycloak
- Hybrid Solutions Combine cloud and on-premises features for flexibility.
  - Examples: Ping Identity

### BY FOCUS AREA

- Developer-Centric Solutions Offer APIs and SDKs for easy integration into custom applications.-
  - Examples: FusionAuth, Auth0
- Enterprise-Focused Solutions Prioritize scalability, compliance, and integration with enterprise tools.
  - Examples: Microsoft Azure AD B2C
- Experience-Centric Solutions Emphasize seamless user experiences with customizable workflows.
  - Examples: Okta, Auth0

## Nine Key Features to Look for in a Passwordless Authentication Solution
1. Flexible authentication methods like biometrics, magic links, and passkeys.
2. Self-service account management tools for users to manage preferences independently.
3. Multi-factor authentication (MFA) support for enhanced security layers.
4. Customizable user interfaces that align with brand identity.
5. High availability to handle traffic spikes during peak usage times.
6. Integration points for exporting user data into analytics or compliance tools.
7. Session management features like automatic timeouts for secure sessions.
8. API-first architecture for seamless integration into existing systems.
9. Compliance tools to meet regulations like GDPR or HIPAA.

crossplatform vs same device - security vs convenience

## Developer's Checklist for Evaluating Passwordless Solutions

- Does the solution support modern standards like WebAuthn or FIDO2?
- Are APIs well-documented and compatible with preferred programming languages?
- Can the solution handle large-scale user bases effectively?
- Is the pricing model transparent and scalable?

## Ready to Go Passwordless?

## Passwordless Options Offered By FusionAuth

Let's see which types of passwordless authentication FA offers, and briefly overview how to configure them. Once you're done with article, you might want to read more detail in the official FA [documentation on passwordless authentication](https://fusionauth.io/docs/lifecycle/authenticate-users/passwordless/).

<Aside type="tip">
If you want to test these options yourself, you'll need an installation of FA. The easiest way to run FA is in a Docker container. Clone the example GitHub repository [here](https://github.com/fusionauth/fusionauth-example-docker-compose). Open a terminal in the `light` subdirectory, and run `docker compose up` in a terminal to start FA. Log in at http://localhost:9011 with `admin@example.com` and `password`.

Using passkeys requires [a free community license](https://fusionauth.io/docs/get-started/core-concepts/plans-features). Some advanced features might require a paid license.
</Aside>

### Magic Link

FA supports magic links. You can configure FA to allow a user to log in with magic links in addition to, or as an alternative to, username and password authentication.

Log in to FusionAuth and in the <Breadcrumb>Tenants</Breadcrumb> page, edit the default tenant. In the <Breadcrumb>Email</Breadcrumb> tab, set the <InlineField>Host</InlineField> to `mail.smtpbucket.com` and the <InlineField>Port</InlineField> to `8025`. [SMTPBucket](https://www.smtpbucket.com) is a free online mail testing service. To configure other email providers for a real service, follow the [SMTP guide](https://fusionauth.io/docs/customize/email-and-messages).

To configure magic links, follow the [guide](https://fusionauth.io/docs/lifecycle/authenticate-users/passwordless/magic-links). In brief, you need to ensure that you have an email template ready to send the user (which was done for you in the [Kickstart file of the repository](https://github.com/fusionauth/fusionauth-example-docker-compose/blob/main/light/kickstart/kickstart.json) you downloaded) and enable passwordless login in the security tab of the application settings (an application is the FA name for a group of users and how they are allowed to log in).

![Enable passwordless](../../../../public/img/docs/lifecycle/authenticate-users/passwordless/turn-on-passwordless.png)

Email templates can be customized in the tenant (a group of FA users and applications), so you can format your magic links and their accompanying message how you want.

![Templates](../../../../public/img/docs/lifecycle/authenticate-users/passwordless/duplicating-email-template.png)

![Template](../../../../public/img/docs/lifecycle/authenticate-users/passwordless/modifying-email-template.png)

Finally, you need to have a user to test the login. In the <Breadcrumb>Users</Breadcrumb> page you can add a new user with an email address, and then add the user to the example Changebank application (this is called a "registration" from the user to the application).

In reality, your application's login page would redirect to a FA page with matching styling, but FA also provides a standalone login page for testing purposes. On the applications page, select View to see more details about the application, including the test OAuth login page, which will be available at http://localhost:9011/oauth2/authorize?client_id=e9fdb985-9173-4e01-9d73-ac2d60d1dc8e&response_type=code&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2Fauth%2Fcallback.

You'll see that the page has a magic link option.

![Magic login](../../../../public/img/docs/lifecycle/authenticate-users/passwordless/login-page-with-magic-link.png)

![Enter email](../../../../public/img/docs/lifecycle/authenticate-users/passwordless/passwordless-email-request-form.png)

If you enter your email address and click the button a login URL will be emailed to you.

![magicEmail](../../../../public/img/articles/authentication/comprehensive-guide-to-passwordless/magicEmail.webp)

Clicking this link will log you in to FA and redirect you to the website that called it (which doesn't exist since this is just a test).

For more information on magic links in FA, read the [documentation](https://fusionauth.io/docs/lifecycle/authenticate-users/passwordless/magic-links).

### One-Time Password (OTP)​

An OTP can be used in two ways: as an alternative to entering a password, or in addition to entering a password.

FusionAuth doesn't support the former case. There isn't usually a need for this, as the process is effectively identical to being emailed a magic link for login, except the message is a PIN not a URL.

In the latter case, an OTP is called multi-factor authentication (MFA) or two-factor authentication (2FA). This isn't passwordless authentication, as you still have to enter a password, with the extra effort of entering an OTP too. However, entering an OTP does reduce some security flaws of passwords.

To configure 2FA, follow the [guide](https://fusionauth.io/docs/lifecycle/authenticate-users/multi-factor-authentication). In brief, you need to enable email in your tenant multi-factor tab and set multi-factor login policy to `required` for your application.

![Enable MFA in the tenant](https://fusionauth.io/img/docs/lifecycle/authenticate-users/tenant-settings-mfa.png)

![Enable MFA in the application](https://fusionauth.io/img/docs/lifecycle/authenticate-users/application-settings-mfa.png)

Now when a user logs in, they will be asked to configure MFA. In this example, you can choose email authentication. Log in at this [URL](http://localhost:9011/oauth2/authorize?client_id=e9fdb985-9173-4e01-9d73-ac2d60d1dc8e&response_type=code&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2Fauth%2Fcallback).

![Set up OTP](../../../../public/img/articles/authentication/comprehensive-guide-to-passwordless/sendOtp.webp)

You'll receive a password via email.

![Receive OTP](../../../../public/img/articles/authentication/comprehensive-guide-to-passwordless/receiveOtp.webp)

After logging in, you'll be able to save recovery codes in case you lose access to your email account.

![Recovery](../../../../public/img/articles/authentication/comprehensive-guide-to-passwordless/recovery.webp)

Now that email authentication is configured, the MFA login will be simpler.

![Send OTP](../../../../public/img/articles/authentication/comprehensive-guide-to-passwordless/sendOtp2.webp)

### Time-Based One-Time Password (TOTP)​

A TOTP authentication flow is similar to an OTP. The user enters an OTP, that changes every thirty seconds, on the FA login page from an app on their phone. The user configures TOTPs by entering a secret key shared between FusionAuth and an authenticator app on their phone. All apps use the same protocol, so the user can choose their favourite app. However, a phone must be used, because FA presents the shared secret as a QA code that has to be photographed.

![TOTP](../../../../public/img/articles/authentication/comprehensive-guide-to-passwordless/totp.webp)

Follow the [guide](https://fusionauth.io/docs/lifecycle/authenticate-users/multi-factor-authentication) to enable TOTP. You won't need to use any email templates.

### Passkeys (FIDO2/WebAuthn)​

Configure passkeys using the [guide](https://fusionauth.io/docs/lifecycle/authenticate-users/passwordless/webauthn-passkeys). In brief, you need only enable them in the WebAuthn tab of the tenant, including the bootstrap and re-authentication protocols (for creating and reusing passkeys). Like all other authentication options you've seen so far, you can override tenant settings for different applications.

![Enable tenant passkeys](https://fusionauth.io/img/docs/lifecycle/authenticate-users/passwordless/tenant-enable-webauthn.png)

Now when you browse to the [application login page](http://localhost:9011/oauth2/authorize?client_id=e9fdb985-9173-4e01-9d73-ac2d60d1dc8e&response_type=code&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2Fauth%2Fcallback), you'll see there is an option to log in with fingerprint or device (i.e. passkey) for richard@example.com.

![Log in with passkey](../../../../public/img/articles/authentication/comprehensive-guide-to-passwordless/selectPasskey.webp)

However, you'll see that no passkeys are found on your device. This is because you can't use passkeys in FusionAuth without setting them up first: either when a user first registers, or in the FA self-service account page.

![No passkey found](../../../../public/img/articles/authentication/comprehensive-guide-to-passwordless/noPasskey.webp)

You will need to direct your existing users to the self-service account management page to create a passkey, which can be found on the <Breadcrumb>Application -> View</Breadcrumb> page in FA. In this localhost example, the self-service page is [here](http://localhost:9011/account/?client_id=e9fdb985-9173-4e01-9d73-ac2d60d1dc8e).

![Add passkey to existing user](../../../../public/img/articles/authentication/comprehensive-guide-to-passwordless/addPasskey.webp)

The user registration URL for localhost can be found in the same way. It's [here](http://localhost:9011/oauth2/register?client_id=e9fdb985-9173-4e01-9d73-ac2d60d1dc8e&response_type=code&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2Fauth%2Fcallback). First, you have to enable self-service registration for any user in the application settings (as opposed to having an administrator enter users' email addresses and sending them invitations).

![Enable registration](../../../../public/img/articles/authentication/comprehensive-guide-to-passwordless/enableRegistration.webp)

Now you, as a user, can browse to the registration URL and register with any email address and password you want. (For testing purposes, it's faster if you as the administrator disabled verifying email addresses in the application settings).

![Register](../../../../public/img/articles/authentication/comprehensive-guide-to-passwordless/register.webp)

On the next page of the registration you can choose to create passkeys.

![Register passkey](../../../../public/img/articles/authentication/comprehensive-guide-to-passwordless/registerPasskey.webp)

After these steps are done, you can [log in](http://localhost:9011/oauth2/authorize?client_id=e9fdb985-9173-4e01-9d73-ac2d60d1dc8e&response_type=code&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2Fauth%2Fcallback) with your passkey in future.

![Log in with passkey](../../../../public/img/articles/authentication/comprehensive-guide-to-passwordless/loginPasskey.webp)

<Aside type="danger">
As you probably noticed, your new user still had to enter a password at registration. This is because FA doesn't yet offer a fully passwordless user experience. There is an open [Github issue](https://github.com/FusionAuth/fusionauth-issues/issues/484) for this feature since 2020. If avoiding passwords entirely is important to you, please vote and comment on this issue to increase its priority for the FA programmers.
</Aside>

{/*
DOESN'T WORK

If you want to continue working with the example user, `richard@example.com`, you can add a passkey to him by using the self-service account portal, available [here](http://localhost:9011/account/?client_id=e9fdb985-9173-4e01-9d73-ac2d60d1dc8e).
*/}

### Using The FA API

You can use the FA API to perform the same login tasks the user performed in the previous sections, programmatically. For example, even though you can style the FA login pages to look however you want, you could create an extremely custom login page that is built in to your existing website if you use the API. Instead of the user entering credentials on the FA login page, the user would enter them on your website, which forwards the credentials to FA.

A more common use-case than logging in, is to ask the user to securely confirm a decision and re-authenticate themselves. For example, when making a purchase on your site.

This is one time where having a more onerous authentication flow is preferable to a faster one. For example, assume a user's child is playing on their parent's computer and is trying to buy something without permission. If the user relies on passkeys, the child can click the passkey in the desktop browser when it pops up. If the user instead uses SMS OTPs, or a TOTP on their phone, it would be much more difficult for the child. Passkeys could be made more secure by the user enabling the browser setting to enter a PIN before accessing the passkey vault. This relies on the user to set up, and is not something your website or FA can enforce.

Let's take a quick look at what an API call would look like for an OTP request or passkey authentication request from your website to FA.

#### Re-Authentication With An OTP

For an OTP (MFA), FusionAuth calls re-authentication "Step Up Auth", which is documented [here](https://fusionauth.io/docs/lifecycle/authenticate-users/multi-factor-authentication#step-up-auth).

<StepUpDiagram alt="Diagram of step up auth when user selects a message based MFA method like email." />

Start the MFA process using the curl command below, specifying for which user and application you want to generate an OTP. (In a real application, you could use any programming language instead of curl).

```sh
curl 'http://localhost:9011/api/two-factor/start' \
-H 'Authorization: 33052c8a-c283-4e96-9d2a-eb1215c69f8f-not-for-prod' \
-H 'Content-Type: application/json' \
-d '{
  "applicationId": "e9fdb985-9173-4e01-9d73-ac2d60d1dc8e",
  "loginId": "richard@example.com",
  "method": "email",
  "state": { "transaction": "pending" }
}'


# RESPONSE:
# {"code":"480408","methods":[],"twoFactorId":"XFb2zBIKB5PoA7ZdZA_A3TjfVPm6fMhD_ypl7axBvyE"}
```

The response above contains the code (OTP) that the user will be challenged to enter. You need to ask the user to enter this code on your website. The two factor Id is a field that use you in subsequent FA calls to remember what MFA flow you're busy with.

Next, as FA to send the OTP to the user's email. You specify only the two factor Id, not the code itself.

```sh
curl 'http://localhost:9011/api/two-factor/send' \
-H 'Authorization: 33052c8a-c283-4e96-9d2a-eb1215c69f8f-not-for-prod' \
-H 'Content-Type: application/json' \
-d '{
  "email": "richard@example.com",
  "method": "email",
  "userId": "00000000-0000-0000-0000-111111111111",
  "twoFactorId": "XFb2zBIKB5PoA7ZdZA_A3TjfVPm6fMhD_ypl7axBvyE"
}'
```

The user will receive an email with the OTP.

![Step up authentication email](../../../../public/img/articles/authentication/comprehensive-guide-to-passwordless/stepup.webp)

Once the user enters this code on your website, you can complete the authentication by verifying the code with FA.

```sh
curl POST 'http://localhost:9011/api/two-factor/login' \
-H 'Authorization: 33052c8a-c283-4e96-9d2a-eb1215c69f8f-not-for-prod' \
-H 'Content-Type: application/json' \
-d '{
  "code": "480408",
  "twoFactorId": "XFb2zBIKB5PoA7ZdZA_A3TjfVPm6fMhD_ypl7axBvyE"
}'
```

All you need to check in this response is the success code 200. You can ignore the JSON returned.

If the code expired no JSON will be returned, but the HTML response will be a 404 (not found). Use `curl -v` to see this extra information. Response 421 indicates the code was invalid.

<Aside type="tip">
If you're trying to test the commands above yourself, but can't complete all the steps before the token expires, you can ignore the middle email step, and instead copy the code directly from the first command into the final, verification, command.
</Aside>

<Aside type="caution">
You might be wondering why you need to call FA to check if the code the user entered was correct in the final step, when you already have the code from the first command's reponse, and your website can compare the two codes itself. There are two reasons:
1. FA automatically handles rejecting expiring codes, so your website doesn't need to implement a timer.
2. You don't have to store the code in server session state in order to check it later. FA handles remembering the code for you, by associating everything with the two factor Id.
</Aside>

#### Re-Authentication With A Passkey

You'll use [SimpleWebauthn TypeScript library](https://simplewebauthn.dev/docs) for this section.

Relying party Id does not need be changed, despite using both localhost:9011 and localhost:3000, because cookies separate domains using ports, but Webauthn does not.

new user registered for passkeys

In Firefox, `about:config`, search for `webauthn` and enable everything.

r@example.com
671d19b7-6364-40ce-b7bc-cc324ce33d39

Run the command below to serve the HTML file at http://localhost:3000.

```sh
docker run --rm --network faNetwork -v .:/app -w /app -p 3000:4507 denoland/deno:latest run --allow-sys --allow-net --allow-read https://deno.land/std/http/file_server.ts /app
```

Start the passkey re-authentication process using the curl command below,

```sh
curl 'http://localhost:9011/api/webauthn/start' \
-H 'Authorization: 33052c8a-c283-4e96-9d2a-eb1215c69f8f-not-for-prod' \
-H 'Content-Type: application/json' \
-d '{
  "applicationId": "e9fdb985-9173-4e01-9d73-ac2d60d1dc8e",
  "userId": "671d19b7-6364-40ce-b7bc-cc324ce33d39",
  "workflow": "reauthentication"
}'

# RESPONSE
# {"options":{"allowCredentials":[{"id":"OZZ_t9_hSYifTaQRY7zqHA","transports":["internal"],"type":"public-key"}],"challenge":"0waGTlesd2BkkrxIIRhJc_nqiyZic_m3zJFA3eHWmJY","timeout":180000,"userVerification":"required"}}

# OLD
# curl 'http://localhost:9011/api/webauthn/start' \
# -H 'Authorization: 33052c8a-c283-4e96-9d2a-eb1215c69f8f-not-for-prod' \
# -H 'Content-Type: application/json' \
# -d '{
#   "applicationId": "e9fdb985-9173-4e01-9d73-ac2d60d1dc8e",
#   "userId": "671d19b7-6364-40ce-b7bc-cc324ce33d39",
#   "workflow": "reauthentication",
#   "state": { "transaction": "pending" }
# }'

# RESPONSE
# {
#   "options": {
#     "allowCredentials": [{
#       "id": "OZZ_t9_hSYifTaQRY7zqHA",
#       "transports": [ "internal" ],
#       "type": "public-key"
#     }],
#     "challenge": "IMVnpxBODYNHX2s0ii27zcIvwMQi2BZqp1qRk4m3_JY",
#     "timeout": 180000,
#     "userVerification": "required"
#   }
# }
```

```sh
curl 'http://localhost:9011/api/webauthn/authenticate' \
-H 'Authorization: 33052c8a-c283-4e96-9d2a-eb1215c69f8f-not-for-prod' \
-H 'Content-Type: application/json' \
-d '{
  "credential": {
    "id": "credential_id_from_authenticator",
    "type": "public-key",
    "rawId": "raw_id_from_authenticator",
    "response": {
      "clientDataJSON": "client_data_from_authenticator",
      "authenticatorData": "authenticator_data",
      "signature": "signature_from_authenticator",
      "userHandle": "user_handle_if_available"
    }
  },
  "rpId": "localhost",
  "origin": "http://localhost:9011"
}'
```




## TODO
- https://drafts.cc.ritza.co/s/PLzzj797u#
- FA
- test kickstart
- update light repo with new email templates
- add corporate trust Apple/MS/Google to security risks article.
- explain biometric local storage vs master password cloud storage distinction - check with niel. biometrics are for convenience, not security.

- add 2fa email to kickstart online example development json. https://github.com/FusionAuth/fusionauth-site/issues/3509
- https://github.com/FusionAuth/fusionauth-example-kickstart/tree/main/fusionauth/emails
- https://github.com/FusionAuth/fusionauth-site/issues/3509
- find out why self service passkey account doesn't work

From Brad:

```
> I’d say using examples with FusionAuth is preferred. This is more informational, less about sales, but I still would like our software to be the example.
> We do support biometrics, via passkeys/webauthn.
> Definitely list us as hybrid.
> Feel free to move things around and combine them as you see fit. I just wanted to give you a starting point, but it’s not set in stone.
17:08
> If a screenshot makes more sense than a code block, that’s fine.
```

Tatenda: firefox, screenshots, use smtpbucket.com instead of gmail


![Firefox](../../../../public/img/articles/authentication/comprehensive-guide-to-passwordless/firefox.webp)


![Chrome](../../../../public/img/articles/authentication/comprehensive-guide-to-passwordless/chrome.webp)


{/*  */}